<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=640,user-scalable=no,target-densityDpi=device-dpi">
    <title>移动端游戏开发</title>
    <link rel="stylesheet" href="css/style1.css" type="text/css">
    <link rel="stylesheet" href="css/animation.css" type="text/css"/>
    <script src="js/lex.js"></script>
</head>
<body>
<script>
    document.body.style.height=view().h+'px';
</script>
      <section class="bgColor sectionIn">
          <div class="Bg-page1"></div>
          <div class="bg-start"></div>
          <div class="main_page1">
              <div class="rocket"></div>
              <div class="thanks"></div>
              <div class="widthyou"></div>
          </div>
          <div class="arrow"></div>

      <div class="jind">
          <span id="jind"></span>
      </div>
      </section>
      <div class="music musicRun" id="music">
           <audio src="audio/bg.mp3" preload="auto" autoplay></audio>
      </div>
<script>
/*   setTimeout(function(){
        addClass(getByClass(document,'section', 'bgColor')[0], 'sectionIn') ;
    },2000)*/
    function changePage(){
        var section=document.getElementsByTagName('section');
        var pageDown=0;
        bind(document,'touchstart',function(ev){
            var ev=ev||event;
            pageDown= ev.changedTouches[0].pageY;
            //console.log(pageDown);
        })
        bind(document,'touchend',function(ev){
            var ev=ev||event;
            var pageUp= ev.changedTouches[0].pageY;
            if(pageUp>pageDown){
                console.log('向下');
                window.location.href='./game.html';

            }else{
                console.log('向上');
               removeClass(section[0],'sectionIn');
               addClass( section[0],'sectionOut');
                window.location.href='./game.html';
            }

        });
    };
    changePage();

    function musicShow(){
        var au=s('music').getElementsByTagName('audio')[0];
        bind(s('music'),'touchstart',function(){
            if(au.paused){
                au.play();
                removeClass(s('music'),'musicStop');
                addClass(s('music'),'musicRun');
            }else{
                au.pause();
                removeClass(s('music'),'musicRun');
                addClass(s('music'),'musicStop');
            }
        });
    }
    musicShow();

    function jind(){
        var arrImg=[
            'image/arrow.png',
            'image/bg-start.png',
            'image/rocket.png',
            'image/thanks.png',
            'image/widthyou.png'
        ];
        var loadNum=0;
        for(var i=0;i<arrImg.length;i++){
            var aImg=document.createElement('img');
            aImg.src=arrImg[i];
            aImg.onload=function(){
                loadNum++;
                s('jind').style.width=Math.floor(loadNum/arrImg.length)*100+'%';
                if(loadNum==arrImg.length){
                    remove(s('jind').parentNode);
                }
            }
        };
    }
    jind();
</script>
</body>
</html>